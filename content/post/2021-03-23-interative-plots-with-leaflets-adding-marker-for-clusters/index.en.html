---
title: 'Interative plots with leaflets: Adding marker for clusters'
author: ''
date: '2021-03-23'
slug: interative-plots-with-leaflets-adding-marker-for-clusters
categories: []
tags:
  - GIS
subtitle: ''
summary: ''
authors: []
lastmod: '2021-03-23T12:39:23+03:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
output:
  blogdown::html_page:
    toc: false
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<div id="adding-markers-for-clusters" class="section level2">
<h2>Adding markers for clusters</h2>
<pre class="r"><code># Load the required packages
library(leaflet)

# We will use the quakes dataset for the sake of demo

# create earthquake magnitude range to define the type as follows 
quakes$magrange = cut(quakes$mag, 
                      breaks = c(4, 5, 6, 7), right=FALSE,
                      labels = c(&quot;Light[4-5)&quot;, &quot;Moderate[5-6)&quot;, &quot;Strong[6-7)&quot;))

# Define a color pallete corresponding to the magnitude ranges
pal = colorFactor(palette = c(&quot;yellow&quot;, &quot;red&quot;, &quot;black&quot;), domain=quakes$magrange)

# Create the map object &amp; add circle marker
object2 &lt;- leaflet(data=quakes) %&gt;% 
  addProviderTiles(&quot;Esri.WorldImagery&quot;) %&gt;% 
  addCircleMarkers(lng = ~ long, 
                   lat= ~ lat, 
                   color = ~ pal(magrange), #use the pallete
                   label = paste(&quot;Magnitude=&quot;, quakes$mag, &quot;Type=&quot;, quakes$magrange),
                   clusterOptions = markerClusterOptions(freezeAtZoom=4)

                   ) %&gt;% 
  # When there are a large number of markers on a map, 
#   you can cluster them using the Leaflet.markercluster plug-in. 
# To enable this plug-in, 
#   you can provide a list of options to the argument 
  addLegend(&quot;bottomright&quot;, pal = pal, values = ~magrange,
            title = &quot;Earthquake Type&quot;,
            opacity = 0.6
  )</code></pre>
</div>
